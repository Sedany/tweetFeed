/*	Author: Subash Adhikari * Description: 	jQuery plugin that fetches tweets for the given username * Contact: me@subash.com.au * website: www.subash.com.au/plugins/tweetfeed	* Github Repo: https://github.com/subash1232/tweetFeed * Version: 1.2*/
if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}}(function(d,c,a,e){var b={init:function(g,h){var f=this;g=d.extend({callback:function(){}},arguments[0]||{});f.elem=h;f.$elem=d(h);f.username=(typeof g==="string")?g:g.username;f.options=d.extend({},d.fn.tweetFeed.options,g);f.url="http://api.twitter.com/1/statuses/user_timeline.json?screen_name="+f.username;f.refresh(1)},refresh:function(g){var f=this;setTimeout(function(){f.fetchTweets().done(function(h){h=f.limit(h,f.options.noOfTweets);f.buildHTML(h);f.display();if(f.options.refresh){f.refresh()}})},g||f.options.refresh)},fetchTweets:function(){return d.ajax({url:this.url,data:{},dataType:"jsonp"})},buildHTML:function(h){var f=this,g=f.options;f.tweets=d.map(h,function(n,l){var k=d(a.createElement(g.wrapUserNameWith)).append('<a href="http://www.twitter.com/'+f.username+'">@'+f.username+"</a>"),o=g.wrapTweetWith!==null?d(a.createElement(g.wrapTweetWith)).append(f.linkify(n.text)):f.linkify(n.text),m=g.wrapDateWith!==null?d(a.createElement(g.wrapDateWith)).append(f.compareDates(n.created_at)):f.compareDates(n.created_at),j=d(a.createElement(g.wrapContWith)).append();if(g.showUsername){j.append(k)}html=j.append(o);if(g.containerClass!==null&&g.wrapContWith!==null){j.addClass(g.containerClass)}if(g.showUsername&&g.usernameClass!==null&&g.wrapUserNameWith!==null){k.addClass(g.usernameClass)}if(g.tweetClass!==null&&g.wrapTweetWith!==null){o.addClass(g.tweetClass)}if(g.dateClass!==null&&g.wrapDateWith!==null){m.addClass(g.dateClass)}if(g.tweetTime){html.append(m)}return html[0]})},compareDates:function(i){var g=new Date((i||"").replace(/-/g,"/").replace(/[TZ]/g," ")),h=(((new Date()).getTime()-g.getTime())/1000),f=Math.floor(h/86400);if(isNaN(f)||f<0||f>=31){return}return f==0&&(h<60&&"just now"||h<120&&"1 minute ago"||h<3600&&Math.floor(h/60)+" minutes ago"||h<7200&&"1 hour ago"||h<86400&&Math.floor(h/3600)+" hours ago")||f==1&&"Yesterday"||f<7&&f+" days ago"||f<31&&Math.ceil(f/7)+" weeks ago"},linkify:function(f){return f.replace(/(https?:\/\/[-_.!~*\'()a-zA-Z0-9;\/?:\@&=+\$,%#]+)/,function(h){var g=(h.length>30)?h.substr(0,30)+"...":h;return'<a href="'+h+'">'+g+"</a>"}).replace(/@([a-zA-Z0-9_]+)/g,'@<a href="http://twitter.com/$1">$1</a>').replace(/(?:^|\s)#([^\s\.\+:!]+)/g,function(g,h){return' <a href="http://twitter.com/search?q='+encodeURIComponent(h)+'">#'+h+"</a>"})},display:function(){var f=this;if(f.options.transition==="false"||!f.options.transition){f.$elem.html(f.tweets)}else{f.$elem[f.options.transition](500,function(){d(this).html(f.tweets)[f.options.transition](500)})}f.options.callback.call(f)},limit:function(g,f){return g.slice(0,f)},};d.fn.tweetFeed=function(f){return this.each(function(){var g=Object.create(b);g.init(f,this);d.data(this,"queryTwitter",g)})};d.fn.tweetFeed.options={username:"adikari",tweetTime:true,showUsername:true,wrapUserNameWith:"h3",wrapContWith:"li",wrapTweetWith:null,wrapDateWith:null,containerClass:null,tweetClass:null,usernameClass:null,dateClass:null,transition:false,noOfTweets:10,refresh:null,callback:null}}(jQuery,window,document));